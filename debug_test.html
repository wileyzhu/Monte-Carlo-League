<!DOCTYPE html>
<html>
<head>
    <title>Debug Test</title>
    <script>
        // Test the exact data structure from our API
        fetch('/api/simulate', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({type: 'single'})
        })
        .then(response => response.json())
        .then(data => {
            console.log('API Response:', data);
            
            if (data.success) {
                const elim = data.result.elimination_results;
                console.log('Elimination data:', elim);
                
                // Test the bracket description logic
                try {
                    const qfTeams = elim.quarterfinals.map(qf => qf.match.join(' vs ')).join(', ');
                    console.log('QF Teams:', qfTeams);
                    
                    const sfTeams = elim.semifinals.map(sf => {
                        if (sf.match && Array.isArray(sf.match)) {
                            return sf.match.join(' vs ');
                        } else if (Array.isArray(sf)) {
                            return sf.join(' vs ');
                        }
                        return 'Unknown match';
                    }).join(', ');
                    console.log('SF Teams:', sfTeams);
                    
                    let finalists;
                    if (elim.finals.match && Array.isArray(elim.finals.match)) {
                        finalists = elim.finals.match.join(' vs ');
                    } else if (Array.isArray(elim.finals)) {
                        finalists = elim.finals.join(' vs ');
                    } else {
                        finalists = 'Unknown finalists';
                    }
                    console.log('Finalists:', finalists);
                    
                    document.body.innerHTML = `
                        <h1>Debug Results</h1>
                        <p><strong>QF:</strong> ${qfTeams}</p>
                        <p><strong>SF:</strong> ${sfTeams}</p>
                        <p><strong>Finals:</strong> ${finalists}</p>
                        <p><strong>Champion:</strong> ${elim.champion}</p>
                    `;
                    
                } catch (error) {
                    console.error('Error in bracket description:', error);
                    document.body.innerHTML = `<h1>Error:</h1><p>${error.message}</p>`;
                }
            } else {
                document.body.innerHTML = `<h1>API Error:</h1><p>${data.error}</p>`;
            }
        })
        .catch(error => {
            console.error('Fetch error:', error);
            document.body.innerHTML = `<h1>Fetch Error:</h1><p>${error.message}</p>`;
        });
    </script>
</head>
<body>
    <h1>Loading...</h1>
</body>
</html>